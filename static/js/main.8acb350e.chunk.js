(this["webpackJsonptramos-horarios"]=this["webpackJsonptramos-horarios"]||[]).push([[0],{68:function(e,n,t){},78:function(e,n,t){"use strict";t.r(n);var r,c=t(3),o=t(0),i=t.n(o),a=t(10),u=t.n(a),s=(t(68),t(115)),l=t(116),j=t(110),O=t(20);function b(e,n){n(function(e){return{type:r.LOGIN,payload:{username:e}}}(e))}function d(e){e({type:r.LOGOUT})}function f(){var e=Object(O.b)(),n=Object(O.c)((function(e){return e.auth}));return{isLoggedIn:!!n.username,username:n.username,login:function(n){return b(n,e)},logout:function(){return d(e)}}}function h(){var e=f(),n=e.isLoggedIn,t=e.username;return n?Object(c.jsx)(j.a,{variant:"h4",children:"\xa1Hola ".concat(t,"!")}):null}!function(e){e.LOGIN="LOGIN",e.LOGOUT="LOGOUT"}(r||(r={}));var v=t(14),x=t(17),C=t(124);function p(e){return Object(c.jsx)(C.a,Object(x.a)({elevation:6,variant:"filled"},e))}var g=t(123),m=t(114),y=t(125),S=t(127),L=t(54);function E(e){var n=e.onSubmit,t=void 0===n?function(){}:n,r=Object(o.useRef)(),i=Object(L.a)(),a=i.register,u=i.handleSubmit,s=f().login;return Object(o.useEffect)((function(){r.current&&(a(r.current),r.current.focus())}),[a]),Object(c.jsxs)("form",{onSubmit:u((function(e){s(e.username),t(e)})),style:{display:"flex",flexDirection:"column"},children:[Object(c.jsx)(g.a,{required:!0,helperText:"No puede ser vac\xedo",type:"input",label:"Usuario",name:"username",variant:"outlined",style:{margin:"10px"},inputProps:{ref:r}}),Object(c.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",style:{margin:"10px"},children:"Confirmar"})]})}function T(e){var n=e.open,t=e.onClose,r=e.onSubmit;return Object(c.jsx)(y.a,{open:n,onClose:t,closeAfterTransition:!0,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(c.jsxs)("div",{style:{backgroundColor:"#fff",padding:"25px",borderRadius:"4px"},children:[Object(c.jsx)("h1",{style:{textAlign:"center"},children:"\xa1Bienvenido!"}),Object(c.jsx)(E,{onSubmit:function(){r&&r(),t&&t()}})]})})}function w(e){var n=e.onClick;return Object(c.jsx)(m.a,{onClick:n,color:"inherit",children:"Ingresar"})}function R(e){var n=e.open,t=e.onClose;return Object(c.jsx)(S.a,{open:n,autoHideDuration:2500,onClose:t,children:Object(c.jsx)(p,{onClose:t,severity:"success",children:"\xa1Bienvenido al sistema!"})})}function I(e){var n=e.onClick,t=void 0===n?function(){}:n,r=f().logout;return Object(c.jsx)(m.a,{onClick:function(){r(),t()},color:"inherit",children:"Salir"})}function k(e){var n=e.open,t=e.onClose;return Object(c.jsx)(S.a,{open:n,autoHideDuration:2500,onClose:t,children:Object(c.jsx)(p,{onClose:t,severity:"success",children:"\xa1Hasta pronto!"})})}function M(e){var n=e.onLoginClick,t=e.onLogoutClick;return f().isLoggedIn?Object(c.jsx)(I,{onClick:t}):Object(c.jsx)(w,{onClick:n})}function N(){var e=Object(o.useState)(!1),n=Object(v.a)(e,2),t=n[0],r=n[1],i=Object(o.useState)(!1),a=Object(v.a)(i,2),u=a[0],s=a[1],l=Object(o.useState)(!1),j=Object(v.a)(l,2),O=j[0],b=j[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(M,{onLoginClick:function(){return r(!0)},onLogoutClick:function(){return b(!0)}}),Object(c.jsx)(T,{open:t,onClose:function(){return r(!1)},onSubmit:function(){return s(!0)}}),Object(c.jsx)(R,{open:u,onClose:function(){return s(!1)}}),Object(c.jsx)(k,{open:O,onClose:function(){return b(!1)}})]})}function _(){return Object(c.jsx)(s.a,{position:"static",children:Object(c.jsxs)(l.a,{style:{justifyContent:"space-between"},children:[Object(c.jsx)(j.a,{variant:"h6",children:"Tramos horarios"}),Object(c.jsx)(h,{}),Object(c.jsx)(N,{})]})})}var A,D=t(117),U=t(118),G=t(119),q=t(120),Y=t(79),F=t(121),H=t(122);!function(e){e.REQUEST_MOTORCYCLE="REQUEST_MOTORCYCLE",e.CANCEL_MOTORCYCLE="CANCEL_MOTORCYCLE"}(A||(A={}));var J=t(33),B={"08:00":8,"08:30":8,"09:00":8,"09:30":8,"10:00":8,"10:30":8,"11:00":8,"11:30":8,"12:00":8,"12:30":8,"13:00":8,"13:30":8,"14:00":8,"14:30":8,"15:00":8,"15:30":8,"16:00":8,"16:30":8,"17:00":8,"17:30":8,"18:00":8,"18:30":8,"19:00":8,"19:30":8,"20:00":8};var Q="username",P={username:window.localStorage.getItem(Q)};var X,V=t(8),z="orders",K=null!==(X=window.localStorage.getItem(z))&&void 0!==X?X:"{}",W=JSON.parse(K);var Z=Object(J.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r.LOGIN:return window.localStorage.setItem(Q,n.payload.username),Object(x.a)(Object(x.a)({},e),{},{username:n.payload.username});case r.LOGOUT:return window.localStorage.removeItem(Q),Object(x.a)(Object(x.a)({},e),{},{username:null});default:return e}},availability:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,n=arguments.length>1?arguments[1]:void 0;return n.type,e},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case A.REQUEST_MOTORCYCLE:var t=n.payload,r=t.username,c=t.hour,o=Object(x.a)(Object(x.a)({},e),{},Object(V.a)({},r,Object(x.a)(Object(x.a)({},e[r]||{}),{},Object(V.a)({},c,!0))));return window.localStorage.setItem(z,JSON.stringify(o)),o;case A.CANCEL_MOTORCYCLE:var i=n.payload,a=i.username,u=i.hour,s=Object(x.a)(Object(x.a)({},e),{},Object(V.a)({},a,Object(x.a)(Object(x.a)({},e[a]),{},Object(V.a)({},u,void 0))));return window.localStorage.setItem(z,JSON.stringify(s)),s;default:return e}}}),$=Object(J.c)(Z,function(){var e=window.__REDUX_DEVTOOLS_EXTENSION__;return e?e():void 0}()),ee=$;function ne(e){var n=$.getState().auth.username;if(!n)throw new Error("Debe iniciar sesi\xf3n");$.dispatch(function(e,n){return{type:A.REQUEST_MOTORCYCLE,payload:{username:e,hour:n}}}(n,e))}function te(e){var n=$.getState().auth.username;if(!n)throw new Error("Debe iniciar sesi\xf3n");$.dispatch(function(e,n){return{type:A.CANCEL_MOTORCYCLE,payload:{username:e,hour:n}}}(n,e))}function re(e,n){return Object.entries(n).reduce((function(n,t){return n+(Object(v.a)(t,2)[1][e]?1:0)}),0)}function ce(e){var n=Object(O.c)((function(e){return e.orders})),t=Object(O.c)((function(e){return e.availability})),r=f().username,c=Object(o.useState)(0),i=Object(v.a)(c,2),a=i[0],u=i[1];return Object(o.useEffect)((function(){var r=function(e,n,t){return n[e]-re(e,t)}(e,t,n);u(r)}),[e,t,n]),{requestMotorcycle:function(e){return ne(e)},cancelMotorcycle:function(e){return te(e)},isRequested:function(e){return!(!n[r]||!n[r][e])},requested:function(e){return re(e,n)},available:a}}function oe(e){var n=e.onClick;return Object(c.jsx)(m.a,{variant:"contained",color:"primary",onClick:n,children:"SOLICITAR"})}function ie(e){var n=e.onClick;return Object(c.jsx)(m.a,{variant:"contained",color:"secondary",onClick:n,children:"CANCELAR"})}function ae(){return Object(c.jsx)(m.a,{variant:"contained",disabled:!0,children:"AGOTADO"})}function ue(e){var n=e.hour,t=e.onRequestMotorcycle,r=e.onCancelMotorcycle,o=ce(n),i=o.isRequested,a=o.available;return i(n)?Object(c.jsx)(ie,{onClick:r}):a>0?Object(c.jsx)(oe,{onClick:t}):Object(c.jsx)(ae,{})}function se(e){var n=e.hour,t=Object(o.useState)(!1),r=Object(v.a)(t,2),i=r[0],a=r[1],u=ce(),s=u.requestMotorcycle,l=u.cancelMotorcycle;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ue,{hour:n,onRequestMotorcycle:function(){return function(e){try{s(e)}catch(n){console.error(n),a(n)}}(n)},onCancelMotorcycle:function(){return function(e){try{l(e)}catch(n){console.error(n),a(n)}}(n)}}),Object(c.jsx)(le,{open:i,message:null===i||void 0===i?void 0:i.message,onClose:function(){return a(!1)}})]})}function le(e){var n=e.open,t=e.message,r=e.onClose;return n&&Object(c.jsx)(S.a,{open:!0,autoHideDuration:2500,onClose:r,children:Object(c.jsx)(p,{onClose:r,severity:"error",children:t||"Error desconocido"})})}function je(){var e=Object(O.c)((function(e){return e.availability}));return Object(c.jsx)(D.a,{children:Object.entries(e).map((function(e){var n=Object(v.a)(e,1)[0];return Object(c.jsx)(Oe,{hour:n},n)}))})}function Oe(e){var n=e.hour,t=ce(n).available;return Object(c.jsxs)(U.a,{children:[Object(c.jsx)(G.a,{children:n}),Object(c.jsx)(G.a,{align:"right",children:t}),Object(c.jsx)(G.a,{align:"right",children:Object(c.jsx)(se,{hour:n})})]})}function be(){return Object(c.jsx)(q.a,{component:Y.a,children:Object(c.jsxs)(F.a,{"aria-label":"simple table",children:[Object(c.jsx)(H.a,{children:Object(c.jsxs)(U.a,{children:[Object(c.jsx)(G.a,{children:"Horario"}),Object(c.jsx)(G.a,{align:"right",children:"Disponibles"}),Object(c.jsx)(G.a,{align:"right",children:"Solicitar"})]})}),Object(c.jsx)(je,{})]})})}function de(e){var n=e.children;return Object(c.jsx)("div",{style:{padding:"50px 25px 25px 25px"},children:n})}function fe(){return Object(c.jsx)("h1",{children:"Selecci\xf3n de motocicleta"})}function he(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(_,{}),Object(c.jsxs)(de,{children:[Object(c.jsx)(fe,{}),Object(c.jsx)(be,{})]})]})}var ve=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,128)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),o(e),i(e)}))};u.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(O.a,{store:ee,children:Object(c.jsx)(he,{})})}),document.getElementById("root")),ve()}},[[78,1,2]]]);
//# sourceMappingURL=main.8acb350e.chunk.js.map